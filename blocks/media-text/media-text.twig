{% extends "base/block.twig"%}

{% set context = {
	data: {
		image: fields.media.image,
		video: fields.media.video,
		crop: fields.media.crop,
		align_text: align_text|default('left'),
		align_content: align_content|default('top'),
		reverse: fields.reverse|default(false),
	},
	align_text: {
		left: 'text-left',
		center: 'text-center',
		right: 'text-right'
	},
	align_content: {
		top: 'items-start',
		center: 'items-center',
		bottom: 'items-end'
	}
} %}

{% set allowed_blocks = [
	'acf/heading',
	'acf/wysiwyg',
	'acf/buttons',
	'acf/image'
] %}


{% block block_content %}

	<div class="grid grid-cols-1 md:grid-cols-2 {{context.align_content[context.data.align_content]}} gap-4 md:gap-8">
		<div class="{{ context.data.reverse ?: 'order-last' }} {{context.data.crop ? 'self-stretch'}}">
			{% if context.data.image %}
				<img class="{{context.data.crop ? 'w-full h-full object-cover'}}" src="{{context.data.image.sizes.large}}" alt="">
			{% endif %}
			{% if context.data.video %}
				<div class="relative aspect-video">
					{{context.data.video|raw}}
				</div>
			{% endif %}
		</div>

		<div class="{{context.align_text[context.data.align_text]}}">
			<InnerBlocks allowedblocks="{{allowed_blocks|json_encode()}}"/>
		</div>
	</div>

{% endblock %}

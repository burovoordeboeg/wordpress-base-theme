{% extends "base/block.twig"%}

{% set block = {
	data: {
		image: fields.image,
		video: fields.video,
		valign: 'top',
		reverse: fields.reverse,
		crop: fields.crop
	},
	variants : {
		top: 'items-start',
		center: 'items-center',
		bottom: 'items-end'
	}
} %}

{% set allowed_blocks = [
	'acf/heading',
	'acf/wysiwyg',
	'acf/buttons',
	'acf/image'
] %}

{% block block_content %}

<div class="grid grid-cols-1 gap-4 md:grid-cols-2 md:gap-8 {{block.variants[block.data.valign]}}">

	<div class="{{block.data.reverse ? 'order-last'}} {{block.data.crop ? 'self-stretch'}}" >

		{% if block.data.video %}
			{{include('components/video/video.twig', {
				data: {
					url: fields.video.url,
					poster: wp_get_attachment_image_url(block.data.image.id),
					autoplay: fields.autoplay_video
				}
			})}}
		{% else %}
			{{include('components/image/image.twig', {
				data: {
					id: block.data.image.id,
					top:block.data.image.top,
					left:block.data.image.left
				},
			})}}	
		{% endif %}
	</div>

	<div>
		<InnerBlocks allowedblocks="{{allowed_blocks|json_encode()}}"/>
	</div>

</div>

<iframe src="https://www.youtube.com/watch?v=uY-2uF5w0mg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<iframe src="https://player.vimeo.com/video/666777222?h=cd8623a210" width="640" height="564" frameborder="0" allow="autoplay; fullscreen" allowfullscreen></iframe>
{% endblock %}

